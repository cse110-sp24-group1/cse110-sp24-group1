<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: global.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: global.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>document.addEventListener("DOMContentLoaded", function() {
    /**
     * Element representing the dark mode toggle switch.
     * @type {HTMLElement}
     */
    const darkModeToggle = document.getElementById("dark-mode-toggle");
    /**
     * Function applyTheme to set the colorSchemes of the elements.
     */
    const applyTheme = (theme) => {
        if (theme === "dark") {
            document.documentElement.classList.add("dark-mode");
            document.documentElement.style.colorScheme = 'dark';
        } else {
            document.documentElement.classList.remove("dark-mode");
            document.documentElement.style.colorScheme = 'light';
        }
    };
    /**
     * The current theme, either 'dark' or 'light', stored in localStorage.
     * @type {string|null}
     */
    let currentTheme = localStorage.getItem("theme");
    /**
     * Set the initial theme based on localStorage or user's preferred color scheme.
     */
    if (currentTheme) {
        applyTheme(currentTheme);
        darkModeToggle.checked = (currentTheme === "dark");
    }
    /**
     * Toggle the theme between dark mode and light mode when the toggle switch is clicked.
     */
    darkModeToggle.addEventListener("change", function () {
        let theme = "light";
        if (darkModeToggle.checked) {
            theme = "dark";
        }
        localStorage.setItem("theme", theme);
        applyTheme(theme);
    });
});

/**
 * List of focusable elements in the modal (initialized upon modal creation).
 * @type {NodeListOf&lt;HTMLElement>}
 */
let focusable = null;

/**
 * Tab event handler for navigating within the modal.
 * @param {KeyboardEvent} e - The keyboard event.
 */
const handleKey = (e) => {
    if (e.keyCode === 9) {
        if (focusable.length) {
            console.log(e.target);
            let first = focusable[0];
            let last = focusable[focusable.length - 1];
            let shift = e.shiftKey;
            if (!Array.from(focusable).includes(e.target)) {
                first.focus();
                e.preventDefault();
            }
            if (shift) {
                if (e.target === first) { // shift-tab pressed on first input in dialog
                    last.focus();
                    e.preventDefault();
                }
            } else {
                if (e.target === last) { // tab pressed on last input in dialog
                    first.focus();
                    e.preventDefault();
                }
            }
        }
    }
}

/**
 * Enables or disables the tab trap within the modal for accessibility.
 * @param {HTMLElement} modal - The modal element.
 * @param {boolean} en - Whether to enable or disable the tab trap.
 */
function enableModalTabTrap(modal, en) {
    let focusableList = modal.querySelectorAll('input,button,select,textarea');
    focusable = focusableList;
    if (en) {
        window.addEventListener('keydown', handleKey);
    } else {
        window.removeEventListener('keydown', handleKey);
        focusable = null;
    }   
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="HomeScript.html">HomeScript</a></li><li><a href="TaskList.html">TaskList</a></li></ul><h3>Global</h3><ul><li><a href="global.html#deleteFolderByID">deleteFolderByID</a></li><li><a href="global.html#deleteNoteByID">deleteNoteByID</a></li><li><a href="global.html#deleteNotesByFolderID">deleteNotesByFolderID</a></li><li><a href="global.html#deleteTask">deleteTask</a></li><li><a href="global.html#enableModalTabTrap">enableModalTabTrap</a></li><li><a href="global.html#focusable">focusable</a></li><li><a href="global.html#getFolderByID">getFolderByID</a></li><li><a href="global.html#getFoldersByID">getFoldersByID</a></li><li><a href="global.html#getNotesByFolderID">getNotesByFolderID</a></li><li><a href="global.html#getTaskList">getTaskList</a></li><li><a href="global.html#handleKey">handleKey</a></li><li><a href="global.html#MAIN_ID">MAIN_ID</a></li><li><a href="global.html#saveFolder">saveFolder</a></li><li><a href="global.html#saveNote">saveNote</a></li><li><a href="global.html#saveTask">saveTask</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sun Jun 09 2024 04:46:13 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
